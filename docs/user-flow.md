# 姿势矫正扩展 - 用户流程图

## 用户路径流程

```mermaid
flowchart TD
    A[用户安装扩展] --> B[首次点击扩展图标]
    B --> C{是否已授权摄像头?}
    
    C -->|否| D[显示权限请求界面]
    D --> E[用户点击"授权摄像头"]
    E --> F{授权成功?}
    F -->|否| G[显示授权失败提示]
    G --> H[提供手动设置指导]
    F -->|是| I[开始环境光检测]
    
    C -->|是| I[开始环境光检测]
    I --> J[显示检测进度界面]
    J --> K{光线是否充足?}
    
    K -->|否| L[显示光线不足警告]
    L --> M[提供改善建议]
    M --> N{用户选择}
    N -->|重新检测| I
    N -->|忽略继续| O[进入主监控界面]
    N -->|设置提醒| P[跳转到设置页面]
    
    K -->|是| Q[显示检测成功]
    Q --> R[用户点击"开始姿势监控"]
    R --> O[进入主监控界面]
    
    O --> S[实时姿势检测开始]
    S --> T{检测到姿势异常?}
    
    T -->|否| U[显示正常状态]
    U --> S
    
    T -->|是| V[计算异常持续时间]
    V --> W{是否达到提醒阈值?}
    W -->|否| S
    W -->|是| X[触发智能提醒流程]
    
    X --> Y[第一级: 图标变色]
    Y --> Z[等待2分钟观察用户反应]
    Z --> AA{姿势是否已纠正?}
    AA -->|是| S
    AA -->|否| BB[第二级: 轻柔弹窗提示]
    BB --> CC[3秒后自动消失]
    CC --> DD[等待5分钟观察]
    DD --> EE{姿势是否已纠正?}
    EE -->|是| S
    EE -->|否| FF[第三级: 声音提醒]
    FF --> GG[用户可选择响应或忽略]
    GG --> HH[等待10分钟]
    HH --> II{姿势是否已纠正?}
    II -->|是| S
    II -->|否| JJ[第四级: 强化提醒]
    JJ --> KK[记录用户忽略模式，智能调整]
    KK --> S
```

## 详细界面跳转路径

### 1. 首次使用流程
```
安装扩展 
    ↓
点击图标 
    ↓
[首次使用界面] → 点击"授权摄像头" 
    ↓
[浏览器权限对话框] → 用户选择"允许"
    ↓
[环境光检测界面] → 自动开始检测
    ↓
[检测结果界面] → 根据结果显示不同内容
    ↓
[主监控界面] → 开始正常使用
```

### 2. 日常使用流程
```
点击扩展图标
    ↓
[主监控界面] → 查看当前状态
    ↓
可选操作：
├── 点击"设置" → [设置页面]
├── 点击"历史记录" → [统计报告页面]  
├── 点击"暂停监控" → 暂停功能
└── 直接关闭弹窗 → 继续后台监控
```

### 3. 智能提醒处理流程
```
检测到异常姿势（持续超过阈值时间）
    ↓
第一级：图标变色 (绿→黄→红)
    ↓
[静默观察10秒]
    ↓
如果未纠正 → 第二级：轻柔弹窗提示
    • 小型半透明提示框
    • "建议调整坐姿 😊" 
    • 3秒后自动淡出消失
    ↓
[静默观察1分钟]
    ↓
如果持续不良 → 第三级：声音提醒
    • 轻柔的提示音（如轻铃声）
    • 音量可调节，默认适中
    • 适合学生阅读/做作业场景
    ↓
[冷却期：5分钟内不再提醒]
    • 给用户充分时间调整和适应
    • 避免频繁打扰，保持专注
```

### 使用场景自适应策略
```
系统智能识别使用场景：
├── 🖥️ 电脑工作场景
│   • 检测到活跃的Chrome窗口
│   • 文档编辑、网页浏览等活动
│   • 提醒策略：图标变色 → 弹窗 → 声音
├── 📚 学习阅读场景  
│   • Chrome最小化或后台运行
│   • 长时间无鼠标键盘活动
│   • 提醒策略：快速升级到声音提醒
└── ⚙️ 用户手动配置
    • 在设置中选择主要使用场景
    • 自定义提醒偏好和时间间隔
```

### 智能适应机制
```
场景检测逻辑：
├── Chrome窗口状态检测
│   • 活跃窗口：电脑工作模式
│   • 最小化/后台：学习阅读模式
├── 用户活动检测
│   • 鼠标键盘活动频率
│   • 判断是否在电脑前工作
└── 时间模式学习
    • 记录不同时段的使用模式
    • 自动切换提醒策略
```

### 4. 设置页面导航
```