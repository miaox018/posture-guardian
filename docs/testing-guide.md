# 姿势守护者 - 测试指南

## 🧪 测试环境准备

### 1. 安装扩展
```bash
# 构建项目
npm run build

# 在Chrome中加载扩展
1. 打开 chrome://extensions/
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目的 dist 目录
```

### 2. 权限要求
- **摄像头权限**: 用于姿势检测
- **通知权限**: 用于提醒功能
- **存储权限**: 用于保存设置

## 🎯 功能测试清单

### 基础功能测试

#### ✅ 扩展安装和初始化
- [ ] 扩展图标正常显示
- [ ] 点击图标打开popup界面
- [ ] 设置页面可以正常访问
- [ ] 默认设置正确加载

#### ✅ 权限申请流程
- [ ] 首次使用显示权限申请界面
- [ ] 摄像头权限申请正常
- [ ] 权限被拒绝时显示正确错误信息
- [ ] 权限授予后进入下一步

#### ✅ 环境光检测
- [ ] 光线检测功能正常工作
- [ ] 光线不足时显示建议
- [ ] 可以选择忽略光线检测

### 姿势检测测试

#### ✅ 摄像头管理
- [ ] 摄像头成功初始化
- [ ] 视频流正常获取
- [ ] 摄像头错误正确处理
- [ ] 多摄像头设备切换功能

#### ✅ MediaPipe BlazePose集成
- [ ] MediaPipe模型正确加载
- [ ] 姿势关键点检测正常
- [ ] 检测置信度计算准确
- [ ] 低置信度结果正确过滤

#### ✅ 姿势分析算法
- [ ] 头部前倾角度计算正确
- [ ] 肩膀倾斜角度计算正确
- [ ] 姿势状态判断准确（GOOD/WARNING/DANGER）
- [ ] 连续检测结果稳定

### 提醒系统测试

#### ✅ 场景自适应
- [ ] 电脑工作模式正确识别
- [ ] 学习阅读模式正确识别
- [ ] 模式切换通知正常

#### ✅ 多级提醒
- [ ] 图标变色提醒正常
- [ ] 温和弹窗显示正确
- [ ] 音频提醒播放正常
- [ ] 提醒冷却机制有效

#### ✅ 智能策略
- [ ] 电脑工作模式：渐进式提醒
- [ ] 学习阅读模式：快速音频提醒
- [ ] 冷却期内不重复提醒

## 🔍 详细测试步骤

### 姿势检测精度测试

1. **正常坐姿测试**
   - 保持良好坐姿
   - 确认状态显示为 GOOD
   - 图标保持绿色

2. **头部前倾测试**
   - 故意前倾头部15-25度
   - 确认状态变为 WARNING
   - 图标变为黄色

3. **严重前倾测试**
   - 头部前倾超过25度
   - 确认状态变为 DANGER
   - 图标变为红色

4. **肩膀倾斜测试**
   - 故意倾斜肩膀
   - 确认检测算法正确识别
   - 状态相应变化

### 提醒流程测试

1. **电脑工作模式**
   ```
   不良姿势 → 图标变色(10秒) → 温和弹窗(1分钟) → 音频提醒
   ```

2. **学习阅读模式**
   ```
   不良姿势 → 图标变色(10秒) → 直接音频提醒
   ```

3. **冷却机制**
   - 提醒后5分钟内不再提醒
   - 冷却期结束后恢复正常检测

## 🐛 常见问题排查

### 摄像头问题
- **权限被拒绝**: 检查浏览器设置中的摄像头权限
- **设备占用**: 关闭其他使用摄像头的应用
- **驱动问题**: 更新摄像头驱动程序

### 检测精度问题
- **光线不足**: 确保有充足的光线
- **背景干扰**: 选择简洁的背景
- **距离问题**: 保持适当的摄像头距离

### 性能问题
- **CPU占用高**: 调整检测间隔设置
- **内存泄漏**: 重启浏览器或扩展
- **响应延迟**: 检查网络连接（MediaPipe模型加载）

## 📊 测试数据记录

### 检测精度统计
- 正确识别率: _%
- 误报率: _%
- 漏报率: _%

### 性能指标
- 平均CPU占用: _%
- 内存使用: _MB
- 检测延迟: _ms

### 用户体验
- 提醒及时性: _/10
- 界面友好度: _/10
- 整体满意度: _/10

## 🚀 自动化测试

### 单元测试
```bash
# 运行单元测试（待实现）
npm run test
```

### 集成测试
```bash
# 运行集成测试（待实现）
npm run test:integration
```

### E2E测试
```bash
# 运行端到端测试（待实现）
npm run test:e2e
```

---

**测试完成后，请将结果反馈给开发团队，帮助我们持续改进产品质量！** 